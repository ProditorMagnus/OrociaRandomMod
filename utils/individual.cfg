#textdomain wesnoth-OrociaRandomMod

#define INDIVIDUAL_LABEL TEXT COLOR
    [if]
        [have_unit]
            side=$side_number
            x,y=$shrine_array[$i].x,$shrine_array[$i].y
			[not]
				side=1
			[/not]
        [/have_unit]
        [then]
            [label]
                x=$shrine_array[$i].x
                y=$shrine_array[$i].y
                color={COLOR}
                text={TEXT}
            [/label]
        [/then]
        [else]
#            [if]
#                [have_unit]
#                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
#                [/have_unit]
#                [then]
#                [/then]
#                [else]
                    [label]
                        x=$shrine_array[$i].x
                        y=$shrine_array[$i].y
                        text=""
                    [/label]
#                [/else]
#            [/if]
        [/else]
    [/if]
#enddef

#define INDIVIDUALUPGRADE
    [event]
        name=side turn
        first_time_only=no
		[filter_condition]
			[variable]
                name=INDIVIDUAL
                equals=yes
            [/variable]
		[/filter_condition]
		[if]
			[variable]
				name=upgrade
				equals=1
			[/variable]
			[then]
				{VARIABLE INDIVIDUAL no}
			[/then]
		[/if]
        [if]
            [variable]
                name=INDIVIDUAL
                equals=yes
            [/variable]
            [then]
                [if]
                    [variable]
                        name=turn_number
                        equals=1
                    [/variable]
                    [then]
                    [/then]
                    [else]
                        [switch]
                            variable=upgrade
                            [case]
                                value=1
                                [switch]
                                    variable=temp
                                    [case]
                                        value=0
                                        {FOREACH shrine_array i}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=resistance
                                                    replace=no
                                                    [resistance]
                                                        arcane=-$res_value
                                                        fire=-$res_value
                                                        blade=-$res_value
                                                        pierce=-$res_value
                                                        impact=-$res_value
                                                        cold=-$res_value
                                                    [/resistance]
                                                [/effect]
                                            [/object]
                                        {NEXT i}
                                    [/case]
                                    [case]
                                        value=1
                                        {OROCIARM_SHOW_UPGRADETYPE (_"hitpoints") 0,176,0}
                                        {FOREACH shrine_array i}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase_total=$hp_value
                                                [/effect]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase=$hp_value
                                                [/effect]
                                            [/object]
                                        {NEXT i}
                                    [/case]
                                    [case]
                                        value=2
                                        {OROCIARM_SHOW_UPGRADETYPE (_"damage") (0,127,255)}
                                        {FOREACH shrine_array i}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_damage=$damage_value
                                                [/effect]
                                            [/object]
                                        {NEXT i}
                                    [/case]
                                    [case]
                                        value=3
                                        {OROCIARM_SHOW_UPGRADETYPE (_"movement") (180,0,180)}
                                        {FOREACH shrine_array i}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=movement
                                                    increase=$move_value
                                                [/effect]
                                            [/object]
                                        {NEXT i}
                                    [/case]
                                    [case]
                                        value=4
                                        [set_variable]
                                            name=temp
                                            value=0
                                        [/set_variable]
                                        {OROCIARM_SHOW_UPGRADETYPE (_"resistance") (255,128,0)}
                                        {FOREACH shrine_array i}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=resistance
                                                    replace=no
                                                    [resistance]
                                                        arcane=-$res_value
                                                        fire=-$res_value
                                                        blade=-$res_value
                                                        pierce=-$res_value
                                                        impact=-$res_value
                                                        cold=-$res_value
                                                    [/resistance]
                                                [/effect]
                                            [/object]
                                        {NEXT i}
                                    [/case]
                                [/switch]
                                [set_variable]
                                    name=temp
                                    add=1
                                [/set_variable]
                            [/case]

                            [case]
                                value=2
                                {FOREACH shrine_array i}
                                    [set_variable]
                                        name=randupgrade
                                        rand=1..7
                                    [/set_variable]
                                    [switch]
                                        variable=randupgrade
                                        [case]
                                            value=1
                                            {INDIVIDUAL_LABEL (_"resistance") (255,128,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=resistance
                                                    replace=no
                                                    [resistance]
                                                        arcane=-$res_value
                                                        fire=-$res_value
                                                        blade=-$res_value
                                                        pierce=-$res_value
                                                        impact=-$res_value
                                                        cold=-$res_value
                                                    [/resistance]
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=2
                                            {INDIVIDUAL_LABEL (_"hitpoints") (0,176,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase_total=$hp_value
                                                [/effect]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase=$hp_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=3
                                            {INDIVIDUAL_LABEL (_"damage") (0,127,255)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_damage=$damage_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=4
                                            {INDIVIDUAL_LABEL (_"movement") (180,0,180)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=movement
                                                    increase=$move_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=5
                                            {INDIVIDUAL_LABEL (_"strike") (74,247,187)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_attacks=$attack_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=6
                                            {INDIVIDUAL_LABEL (_"nothing") (255,255,0)}
                                        [/case]
                                        [case]
                                            value=7
                                            {INDIVIDUAL_LABEL (_"nothing") (255,255,0)}
                                        [/case]
                                    [/switch]
                                {NEXT i}
                            [/case]

                            [case]
                                value=3
                                {FOREACH shrine_array i}
                                    [set_variable]
                                        name=randupgrade
                                        rand=1..6
                                    [/set_variable]
                                    [switch]
                                        variable=randupgrade
                                        [case]
                                            value=1
                                            {INDIVIDUAL_LABEL (_"resistance") (255,128,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=resistance
                                                    replace=no
                                                    [resistance]
                                                        arcane=-$res_value
                                                        fire=-$res_value
                                                        blade=-$res_value
                                                        pierce=-$res_value
                                                        impact=-$res_value
                                                        cold=-$res_value
                                                    [/resistance]
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=2
                                            {INDIVIDUAL_LABEL (_"hitpoints") (0,176,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase_total=$hp_value
                                                [/effect]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase=$hp_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=3
                                            {INDIVIDUAL_LABEL (_"damage") (0,127,255)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_damage=$damage_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=4
                                            {INDIVIDUAL_LABEL (_"movement") (180,0,180)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=movement
                                                    increase=$move_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=5
                                            {INDIVIDUAL_LABEL (_"strike") (74,247,187)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_attacks=$attack_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=6
                                            {INDIVIDUAL_LABEL (_"zonk!") (255,0,0)}
                                            [set_variable]
                                                name=randzonk
                                                rand=1..2
                                            [/set_variable]
                                            [switch]
                                                variable=randzonk
                                                [case]
                                                    value=1
                                                    [object]
                                                        silent=yes
                                                        [filter]
                                                            x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                            side=$side_number
                                                        [/filter]
                                                        [effect]
                                                            apply_to=attack
                                                            increase_attacks=-$zonk_attack
                                                        [/effect]
                                                    [/object]
                                                [/case]
                                                [case]
                                                    value=2
                                                    [object]
                                                        silent=yes
                                                        [filter]
                                                            x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                            side=$side_number
                                                        [/filter]
                                                        [effect]
                                                            apply_to=attack
                                                            increase_damage=-$zonk_damage
                                                        [/effect]
                                                    [/object]
                                                [/case]
                                            [/switch]
                                        [/case]
                                        [case]
                                            value=7
                                            {INDIVIDUAL_LABEL (_"nothing") (255,255,0)}
                                        [/case]
                                    [/switch]
                                {NEXT i}
                            [/case]

                            [case]
                                value=4
                                {FOREACH shrine_array i}
                                    [set_variable]
                                        name=randupgrade
                                        rand=1..7
                                    [/set_variable]
                                    [switch]
                                        variable=randupgrade
                                        [case]
                                            value=1
                                            {INDIVIDUAL_LABEL (_"resistance") (255,128,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=resistance
                                                    replace=no
                                                    [resistance]
                                                        arcane=-$res_value
                                                        fire=-$res_value
                                                        blade=-$res_value
                                                        pierce=-$res_value
                                                        impact=-$res_value
                                                        cold=-$res_value
                                                    [/resistance]
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=2
                                            {INDIVIDUAL_LABEL (_"hitpoints") (0,176,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase_total=$hp_value
                                                [/effect]
                                                [effect]
                                                    apply_to=hitpoints
                                                    increase=$hp_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=3
                                            {INDIVIDUAL_LABEL (_"damage") (0,127,255)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_damage=$damage_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=4
                                            {INDIVIDUAL_LABEL (_"movement") (180,0,180)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=movement
                                                    increase=$move_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=5
                                            {INDIVIDUAL_LABEL (_"strike") (74,247,187)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=attack
                                                    increase_attacks=$attack_value
                                                [/effect]
                                            [/object]
                                        [/case]
                                        [case]
                                            value=6
                                            {INDIVIDUAL_LABEL (_"zonk!") (255,0,0)}
                                            [set_variable]
                                                name=randzonk
                                                rand=1..2
                                            [/set_variable]
                                            [switch]
                                                variable=randzonk
                                                [case]
                                                    value=1
                                                    [object]
                                                        silent=yes
                                                        [filter]
                                                            x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                            side=$side_number
                                                        [/filter]
                                                        [effect]
                                                            apply_to=attack
                                                            increase_attacks=-$zonk_attack
                                                        [/effect]
                                                    [/object]
                                                [/case]
                                                [case]
                                                    value=2
                                                    [object]
                                                        silent=yes
                                                        [filter]
                                                            x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                            side=$side_number
                                                        [/filter]
                                                        [effect]
                                                            apply_to=attack
                                                            increase_damage=-$zonk_damage
                                                        [/effect]
                                                    [/object]
                                                [/case]
                                            [/switch]
                                        [/case]

                                        [case]
                                            value=7
                                            {INDIVIDUAL_LABEL (_"defense") (0,90,0)}
                                            [object]
                                                silent=yes
                                                [filter]
                                                    x,y=$shrine_array[$i].x,$shrine_array[$i].y
                                                    side=$side_number
                                                [/filter]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        deep_water=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        shallow_water=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        swamp_water=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        flat=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        sand=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        forest=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        hills=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        mountains=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        village=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        castle=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        cave=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        frozen=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        unwalkable=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        impassable=-$def_value
                                                    [/defense]
                                                [/effect]
                                                [effect]
                                                    apply_to=defense
                                                    replace=no
                                                    [defense]
                                                        fungus=-$def_value
                                                    [/defense]
                                                [/effect]
                                            [/object]
                                        [/case]
                                    [/switch]
                                {NEXT i}
                            [/case]
                        [/switch]
                    [/else]
                [/if]
            [/then]
        [/if]
    [/event]
#enddef
